(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.i=function(value){return value};__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{configurable:false,enumerable:true,get:getter})}};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=0)})([function(module,exports){if(typeof AFRAME==="undefined"){throw new Error("Component attempted to register before AFRAME was available.")}AFRAME.registerComponent("websocket",{schema:{userType:{type:"string",default:"client"}},multiple:true,init:function(evt){this.deltaT=0;this.sendToTick;this.attributeList={};this.socket=io.connect("http://localhost");console.log(this.el.components);if(this.data.userType=="client"){this.socket.on("updateComponents",attributeList=>{this.sendToTick=attributeList})}},update:function(oldData){console.log("websocket is updating")},remove:function(){},tick:function(t){if(this.data.userType=="controller"){if(t>this.deltaT+1e3){this.deltaT=t;var needsChange=false;var sendList={};for(i of this.el.attributes){if(i.name!=this.attrName&&i.name!="id"){var currentAttributeProps=this.el.getAttribute(i.name);for(j in currentAttributeProps){this.attributeList[i.name]=this.attributeList[i.name]||{};if(Object.values(this.attributeList).length==0||this.attributeList[i.name][j]!=currentAttributeProps[j]){sendList[i.name]=sendList[i.name]||{};sendList[i.name][j]=currentAttributeProps[j];if(i.name=="rotation"){if(sendList["rotation"].x!=undefined&&sendList["rotation"].y!=undefined){needsChange=true}}else{needsChange=true}}}}}if(needsChange){this.socket.emit("controlComponent",sendList);for(i in sendList){var currentVar=sendList[i];this.attributeList[i]=sendList[i]}}}}if(this.data.userType=="client"){for(i in this.sendToTick){var currentAttribute=this.sendToTick[i];if(i=="rotation"){this.el.setAttribute(i,currentAttribute)}else{}}}},pause:function(){},play:function(){}});AFRAME.registerComponent("drag-rotate-component",{schema:{speed:{default:1}},init:function(){this.ifMouseDown=false;this.x_cord=0;this.y_cord=0;document.addEventListener("mousedown",this.OnDocumentMouseDown.bind(this));document.addEventListener("mouseup",this.OnDocumentMouseUp.bind(this));document.addEventListener("mousemove",this.OnDocumentMouseMove.bind(this))},OnDocumentMouseDown:function(event){this.ifMouseDown=true;this.x_cord=event.clientX;this.y_cord=event.clientY},OnDocumentMouseUp:function(){this.ifMouseDown=false},OnDocumentMouseMove:function(event){if(this.ifMouseDown){var temp_x=event.clientX-this.x_cord;var temp_y=event.clientY-this.y_cord;if(Math.abs(temp_y)<Math.abs(temp_x)){this.el.object3D.rotateY(temp_x*this.data.speed/1e3)}else{this.el.object3D.rotateX(temp_y*this.data.speed/1e3)}this.x_cord=event.clientX;this.y_cord=event.clientY}}})}]);
